<div class="col-md-6 col-md-offset-3">

    <h2>Register</h2>

    <form [formGroup]="form" (submit)="register()">
        <!-- Username Input -->
        <div class="form-group">
            <label for="username">Username</label>
            <div [ngClass]="{'has-error': (form.controls.username.errors && form.controls.username.dirty) || (!usernameValid && form.controls.username.dirty), 'has-success': !form.controls.username.errors && usernameValid}">
                <input type="text" name="username" class="form-control" autocomplete="off" placeholder="*Username" formControlName="username"
                    (blur)="checkUsername()" />
                <!-- Validation -->
                <ul class="help-block">
                    <li *ngIf="form.controls.username.errors?.required && form.controls.username.dirty">This field is required</li>
                    <li *ngIf="form.controls.username.errors?.minlength && form.controls.username.dirty || form.controls.username.errors?.maxlength && form.controls.username.dirty ">Minimum characters: 3, Maximum characters: 15</li>
                    <li *ngIf="form.controls.username.errors?.validateUsername && form.controls.username.dirty">Username must not have any special characters</li>
                    <li *ngIf="usernameMessage && form.controls.username.valid">{{ usernameMessage }}</li>
                </ul>
            </div>
        </div>
        <!-- Email Input -->
        <div class="form-group">
            <label for="email">Email</label>
            <div [ngClass]="{'has-error': (form.controls.email.errors && form.controls.email.dirty) || (!emailValid && form.controls.email.dirty), 'has-success': !form.controls.email.errors && emailValid}">
                <input type="text" name="email" class="form-control" autocomplete="off" placeholder="*your@email.com" formControlName="email"
                    (blur)="checkEmail()" />
                <!-- Validation -->
                <ul class="help-block">
                    <li *ngIf="form.controls.email.errors?.required && form.controls.email.dirty">This field is required</li>
                    <li *ngIf="form.controls.email.errors?.minlength && form.controls.email.dirty || form.controls.email.errors?.maxlength && form.controls.email.dirty ">Minimum characters: 5, Maximum characters: 30</li>
                    <li *ngIf="form.controls.email.errors?.validateEmail && form.controls.email.dirty">That's not a real email address!</li>
                    <li *ngIf="emailMessage && form.controls.email.valid">{{ emailMessage }}</li>
                </ul>
            </div>
        </div>
        <!-- Password Input -->
        <div class="form-group">
            <label for="password">Password</label>
            <div [ngClass]="{'has-error': (form.controls.password.errors && form.controls.password.dirty), 'has-success': !form.controls.password.errors}">
                <input type="password" name="password" class="form-control" autocomplete="off" placeholder="*Password" formControlName="password"
                />
                  <strength-bar [passwordToCheck]="form.value.password" [barLabel]="ciao"></strength-bar>
                 
                <!-- Validation -->
                <ul class="help-block">
                    <li *ngIf="form.controls.password.errors?.required && form.controls.password.dirty">This field is required</li>
                    <li *ngIf="form.controls.password.errors?.minlength && form.controls.password.dirty || form.controls.password.errors?.maxlength && form.controls.password.dirty ">Minimum characters: 8, Maximum characters: 35</li>
                    <li *ngIf="form.controls.password.errors?.validatePassword && form.controls.password.dirty">Password must be at least 8 characters but no more than 35</li>
                </ul>
            </div>
        </div>

    
        <div class="form-group">
            <input  [disabled]="!form.valid || loading || !emailValid || !usernameValid" type="submit" class="btn btn-primary" value="Register"/>
            <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
            />
            <a [routerLink]="['/login']" class="btn btn-link">Cancel</a>
        </div>
        </form>
</div>